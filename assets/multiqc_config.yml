report_comment: >
  This report has been generated by the <a href="https://github.com/nf-core/stableexpression/tree/dev" target="_blank">nf-core/stableexpression</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://nf-co.re/stableexpression/dev/docs/output" target="_blank">documentation</a>.

report_section_order:
  "nf-core-stableexpression-methods-description":
    order: -1000
  software_versions:
    order: -1001
  "nf-core-stableexpression-summary":
    order: -1002

export_plots: true

run_modules:
  - custom_content

disable_version_detection: true

max_table_rows: 5000

custom_data:
  ranked_top_stable_genes_summary:
    section_name: "Top stable genes - ranked by stability"
    file_format: "csv"
    no_violin: true
    sort_rows: false
    description: |
      Expression descriptive statistics of all genes, ranked by stability.
      Expression were normalised and cpm (counts per million) were used for all calculations.
      Genes are sorted by M-measure - from the most stable to the least stable.
    plot_type: "table"
    pconfig:
      col1_header: "Rank"
    headers:
      rank:
        rid: "Rank"
        hidden: true
      ensembl_gene_id:
        title: "Ensembl Gene ID"
        description: |
          Gene IDs as shown in Ensembl
        format: "{:,.3f}"
      m_measure:
        title: "Stability"
        description: |
          Gene stability measure M as defined in Vandesompele et al., Genome Biology (2002).
          Lower values indicate higher stability.
          M-measures were calculated directly from cpm (normalised count per million).
        format: "{:,.3f}"
        #minrange: 0
      standard_deviation:
        title: "Std"
        description: |
          Standard deviation of the expression across samples.
          For each sample, expression was determined as log2(cpm + 1).
        format: "{:,.3f}"
      variation_coefficient:
        title: "Var coeff"
        description: |
          Variation coefficient: std(expression) / mean(expression).
          For each sample, expression was determined as log2(cpm + 1).
        format: "{:,.3f}"
      mean:
        title: "Mean"
        description: |
          Average expression across samples.
          For each sample, expression was determined as log2(cpm + 1).
        format: "{:,.3f}"
      expression_level_quantile_interval:
        title: "Expr. level"
        description: |
          Quantile interval of the average expression for this gene (100 intervals from 0 to 99).
          The higher the quantile interval, the higher the average expression.
          For each sample, expression was determined as log2(cpm + 1).
        format: "{:,.0f}"
        hidden: true
      quantile_interval_status:
        title: "Expr. status"
        description: |
          Indication about the average gene expression level compared to the whole pool of genes.
        cond_formatting_rules:
          fail:
            - s_eq: "Very high expression"
            - s_eq: "Very low expression"
          warn:
            - s_eq: "High expression"
            - s_eq: "Low expression"
          pass:
            - s_eq: "Medium range"
      name:
        title: "Ensembl name"
        description: |
          Gene name as shown in Ensembl (g:Profiler)
      description:
        title: "Ensembl description"
        description: |
          Gene description as shown in Ensembl (g:Profiler)
      original_gene_ids:
        title: "Original gene IDs"
        description: |
          Original gene IDs as stated in the input (provided or downloaded) datasets

  expression_distributions_top_stable_genes:
    section_name: "Expression distribution of the top stable genes (ranked by stability)"
    file_format: "csv"
    pconfig:
      sort_samples: false
      sort_rows: false
    description: |
      Distribution of gene expression across samples for the most stable genes.
      For each sample, expression was determined as log2(cpm + 1) were cpm is the normalised count per million.
      Genes are ranked from the most stable to the least stable.
    plot_type: "boxplot"
    #xlab: Expression
    #ylab: Gene

  gene_statistics:
    section_name: "Descriptive statistics - All genes"
    file_format: "csv"
    description: |
      Distribution of descriptive statistics for all genes.
      Expression was prior calculated as log2(cpm + 1) were cpm is the normalised counts per million across all samples.
    plot_type: "violin"
    pconfig:
      col1_header: "Ensembl Gene ID"
    headers:
      # colors from https://colorbrewer2.org/#type=diverging&scheme=BrBG&n=8
      m_measure:
        title: "Gene stability M-measure"
        description: |
          Gene stability measure M as defined in Vandesompele et al., Genome Biology (2002)
        color: "#bf812d"
      standard_deviation:
        title: "Standard deviation"
        description: |
          Standard deviation of the expression across samples
        color: "#bf812d"
      variation_coefficient:
        title: "Variation coefficient"
        description: |
          Ratio of standard deviation to mean
        color: "#f6e8c3"
      mean:
        title: "Average"
        description: |
          Average expression across samples.
          Expression was calculated as preprocessed as expression = log2(cpm + 1).
        color: "#01665e"

  expression_distributions_by_sample:
    section_name: "Distribution of expression (all genes together) sample by sample"
    file_format: "csv"
    description: |
      Distribution of overall gene expression sample by sample.
      Expression was calculated as log2(cpm + 1) were cpm is the normalised count per million in one sample.
    plot_type: "boxplot"

#violin_downsample_after: 10000

log_filesize_limit: 10000000000 # 10GB

sp:
  ranked_top_stable_genes_summary:
    fn: "*top_stable_genes_summary.csv"
    max_filesize: 5000000 # 5MB
  expression_distributions_top_stable_genes:
    fn: "*top_stable_genes_transposed_log_counts.csv"
    max_filesize: 50000000 # 50MB
  gene_statistics:
    fn: "*stats_all_genes.csv"
    max_filesize: 50000000 # 50MB
  expression_distributions_by_sample:
    fn: "*all_log_counts.csv"
